# ðŸ¦« Capybara VPN - Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²

ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ WireGuard VPN Ð½Ð° macOS Ð¸ iOS Ñ udp2raw.

**Capybara Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÑŽ udp2raw** Ð´Ð»Ñ Ð¼Ð°ÑÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ VPN Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ° Ð¿Ð¾Ð´ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ HTTPS, Ð¾Ð±Ñ…Ð¾Ð´Ñ Deep Packet Inspection (DPI) Ð² Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð½Ñ‹Ñ… ÑÐµÑ‚ÑÑ… Ñ‚Ð°ÐºÐ¸Ñ… ÐºÐ°Ðº ÐšÐ¸Ñ‚Ð°Ð¹, Ð Ð¾ÑÑÐ¸Ñ, Ð˜Ñ€Ð°Ð½ Ð¸ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ñ€Ð²Ð¾Ð»Ñ‹.

---

## ðŸ“‹ ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ

ÐŸÐµÑ€ÐµÐ´ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¾Ð¹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾:

1. **Ð¡Ð¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½Ð° VPN ÑÐµÑ€Ð²ÐµÑ€Ðµ:**
   ```bash
   ./capybara.py user add alice --description "Ð£ÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ ÐÐ»Ð¸ÑÑ‹"
   ```

2. **Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»** Ð¸Ð· `./vpn_clients/`:
   - ÐŸÑ€Ð¸Ð¼ÐµÑ€: `alice_20251106_123456.conf`
   - Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð²Ð°Ñˆ Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

3. **Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ðµ:**
   - IP ÑÐµÑ€Ð²ÐµÑ€Ð°: IP Ð°Ð´Ñ€ÐµÑ Ð²Ð°ÑˆÐµÐ³Ð¾ VPN ÑÐµÑ€Ð²ÐµÑ€Ð°
   - ÐžÐ±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ñ€Ñ‚: `443` (TCP, Ð¼Ð°ÑÐºÐ¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¿Ð¾Ð´ HTTPS)
   - VPN ÑÐµÑ‚ÑŒ: `10.7.0.0/24`

---

## ðŸŽ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° macOS (Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ)

macOS Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ WireGuard Ñ‡ÐµÑ€ÐµÐ· udp2raw, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼Ð°ÑÐºÐ¸Ñ€ÑƒÐµÑ‚ VPN Ñ‚Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ð¾Ð´ HTTPS Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443.

### Ð¨Ð°Ð³ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ WireGuard
brew install wireguard-tools

# Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº udp2raw
cd /usr/local/bin
sudo curl -L -o udp2raw https://github.com/wangyu-/udp2raw/releases/download/20230206.0/udp2raw_amd64
sudo chmod +x udp2raw

# Ð”Ð»Ñ Apple Silicon (M1/M2/M3) Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ arm64 Ð²ÐµÑ€ÑÐ¸ÑŽ:
# sudo curl -L -o udp2raw https://github.com/wangyu-/udp2raw/releases/download/20230206.0/udp2raw_arm

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
udp2raw --help
wg --version
```

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°

ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Capybara, ÑƒÐ¶Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð´Ð»Ñ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ð¸:

**ÐŸÑ€Ð¸Ð¼ÐµÑ€: `alice_20251106_123456.conf`**
```ini
[Interface]
PrivateKey = aL6+fXETtv/i01j7jBQDKtnlNXHBfTy9eE2oAcyxfWM=
Address = 10.7.0.3/24
MTU = 1280
DNS = 1.1.1.1, 8.8.8.8

# Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° udp2raw Ð¿Ñ€Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸
PreUp = sudo /usr/local/bin/udp2raw -c -l 127.0.0.1:4096 -r IP_Ð’ÐÐ¨Ð•Ð“Ðž_Ð¡Ð•Ð Ð’Ð•Ð Ð:443 -k SecureVPN2025Obfuscate --raw-mode faketcp --cipher-mode xor --auth-mode hmac_sha1 -a &
PostDown = sudo killall udp2raw

[Peer]
PublicKey = D1m+SC4pa0UDNLXcKb/+cWO1rMXgvEQYl1CZlEFD/1A=
AllowedIPs = 0.0.0.0/0
Endpoint = 127.0.0.1:4096  # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ udp2raw
PersistentKeepalive = 25
```

**ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:**
- `Endpoint = 127.0.0.1:4096` - ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñƒ udp2raw
- `PreUp` - Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚ udp2raw, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚ 443 ÑÐµÑ€Ð²ÐµÑ€Ð°
- `PostDown` - ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ udp2raw Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸
- Ð¢Ñ€Ð°Ñ„Ð¸Ðº Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443 Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÐºÐ°Ðº HTTPS Ð´Ð»Ñ ÑÐµÑ‚ÐµÐ²Ñ‹Ñ… Ð¸Ð½ÑÐ¿ÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²

### Ð¨Ð°Ð³ 3: ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð² Sudo (Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)

udp2raw Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð° root Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº raw socket:

```bash
# Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» sudoers
sudo visudo

# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð¸ ÑÑ‚Ñ€Ð¾ÐºÐ¸ (Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ 'yourusername' Ð½Ð° Ð²Ð°ÑˆÐµ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ macOS):
yourusername ALL=(ALL) NOPASSWD: /usr/local/bin/udp2raw
yourusername ALL=(ALL) NOPASSWD: /usr/bin/killall udp2raw

# Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸ Ð²Ñ‹Ð¹Ñ‚Ð¸ (Ctrl+X, Ð·Ð°Ñ‚ÐµÐ¼ Y, Ð·Ð°Ñ‚ÐµÐ¼ Enter Ð² nano)
```

**Ð—Ð°Ñ‡ÐµÐ¼ ÑÑ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾:** udp2raw ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ raw TCP Ð¿Ð°ÐºÐµÑ‚Ñ‹ Ð´Ð»Ñ Ð¼Ð°ÑÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ UDP Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ°, Ñ‡Ñ‚Ð¾ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ñ€Ð°Ð² root.

### Ð¨Ð°Ð³ 4: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸

Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ WireGuard:

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ WireGuard
sudo mkdir -p /etc/wireguard

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¸Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð°)
sudo cp alice_20251106_123456.conf /etc/wireguard/alice.conf

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð°
sudo chmod 600 /etc/wireguard/alice.conf
```

### Ð¨Ð°Ð³ 5: ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ VPN Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ
sudo wg-quick up alice

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
sudo wg show

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ IP
curl ifconfig.me

# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ IP Ð²Ð°ÑˆÐµÐ³Ð¾ VPN ÑÐµÑ€Ð²ÐµÑ€Ð°
```

### Ð¨Ð°Ð³ 6: ÐžÑ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ VPN Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ
sudo wg-quick down alice
```

### ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð² Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

Ð”Ð»Ñ ÑƒÐ´Ð¾Ð±Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹:

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
cat > ~/vpn-connect.sh << 'EOF'
#!/bin/bash
sudo wg-quick up alice
echo "VPN Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½!"
curl ifconfig.me
EOF

chmod +x ~/vpn-connect.sh

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
cat > ~/vpn-disconnect.sh << 'EOF'
#!/bin/bash
sudo wg-quick down alice
echo "VPN Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½!"
EOF

chmod +x ~/vpn-disconnect.sh
```

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:
```bash
~/vpn-connect.sh      # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº VPN
~/vpn-disconnect.sh   # ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð¾Ñ‚ VPN
```

---

## ðŸ“± ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° iOS (Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð¾Ð±Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð¿ÑƒÑ‚Ð¸)

**âš ï¸ Ð’Ð°Ð¶Ð½Ð¾:** iOS **Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ udp2raw** Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾ (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹Ðº). ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð¸Ð· ÑÑ‚Ð¸Ñ… Ð¾Ð±Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð¿ÑƒÑ‚ÐµÐ¹:

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: GL.iNet Travel Router (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ñ€Ð¾ÑƒÑ‚ÐµÑ€, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÑŽ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð²Ð°ÑˆÐ¸Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²:

**ÐžÐ±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ:** GL.iNet GL-MT300N-V2 (~$20) Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ñ‹Ð¹ OpenWrt-ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ñ€Ð¾ÑƒÑ‚ÐµÑ€

**ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°:**
1. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ OpenWrt** Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€ (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¿Ñ€ÐµÐ´ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð½Ð° GL.iNet)
2. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹** Ñ‡ÐµÑ€ÐµÐ· SSH:
   ```bash
   opkg update
   opkg install wireguard-tools kmod-wireguard
   # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ udp2raw Ð¸Ð· Ñ€ÐµÐ»Ð¸Ð·Ð¾Ð² GitHub
   ```
3. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ WireGuard** Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ðµ Ñ udp2raw
4. **ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ iOS ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾** Ðº WiFi Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð°

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Ð»ÑŽÐ±Ñ‹Ð¼ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾Ð¼ (iPhone, iPad, Android, Ð½Ð¾ÑƒÑ‚Ð±ÑƒÐº)
- âœ… ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹Ðº
- âœ… ÐŸÐ¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ - Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÑƒÐ´Ð° ÑƒÐ³Ð¾Ð´Ð½Ð¾
- âœ… ÐžÐ´Ð½Ð¾ÐºÑ€Ð°Ñ‚Ð½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°
- âœ… ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÑŽ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²

**Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ðµ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ñ‹:**
- GL.iNet GL-MT300N-V2 (Mango) - $20
- GL.iNet GL-AR750S-Ext (Slate) - $50
- GL.iNet GL-AXT1800 (Slate AX) - $90

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Mac ÐºÐ°Ðº VPN ÑˆÐ»ÑŽÐ·

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð²Ð°Ñˆ Mac ÐºÐ°Ðº Ð¿Ñ€Ð¾ÐºÑÐ¸ Ð´Ð»Ñ iOS ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²:

**ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°:**
1. **ÐÐ° Mac:** ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº VPN Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ (ÑÐ¼. Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÑƒ macOS Ð²Ñ‹ÑˆÐµ)
2. **Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð¾Ð±Ñ‰Ð¸Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñƒ:**
   - ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ â†’ Sharing
   - Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ "Internet Sharing"
   - Share your connection from: **WireGuard (wg0)**
   - To computers using: **Wi-Fi**
   - Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð³Ð°Ð»Ð¾Ñ‡ÐºÑƒ Ð´Ð»Ñ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

3. **ÐÐ° iOS:** ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº Ñ€Ð°Ð·Ð´Ð°Ð²Ð°ÐµÐ¼Ð¾Ð¹ WiFi ÑÐµÑ‚Ð¸ Mac

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÑÑ€Ð°Ð·Ñƒ
- âœ… Ð’ÐµÑÑŒ Ñ‚Ñ€Ð°Ñ„Ð¸Ðº iOS Ð¸Ð´ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ VPN

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ Mac Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½
- âŒ ÐÐµ Ð¿Ð¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²Ð½Ð¾

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3: ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñ‹

Ð’Ð¼ÐµÑÑ‚Ð¾ WireGuard Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ðµ Ðº Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ð¼ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñ‹ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ð¸:

**Shadowsocks:**
1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Shadowsocks ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Ð²Ð°Ñˆ VPS
2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ iOS Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ: Shadowrocket Ð¸Ð»Ð¸ QuantumultX
3. Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ð¸

**V2Ray:**
1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ V2Ray ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Ð²Ð°Ñˆ VPS
2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ iOS Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ: Shadowrocket Ð¸Ð»Ð¸ V2RayNG
3. ÐœÐ½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð² Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ð¸

**ÐŸÐ»ÑŽÑÑ‹:**
- âœ… ÐÐ°Ñ‚Ð¸Ð²Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° iOS
- âœ… ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ
- âœ… Ð¥Ð¾Ñ€Ð¾ÑˆÐ°Ñ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ

**ÐœÐ¸Ð½ÑƒÑÑ‹:**
- âŒ Ð”Ñ€ÑƒÐ³Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ðµ WireGuard)
- âŒ Ð¢Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð¿Ð»Ð°Ñ‚Ð½Ñ‹Ðµ iOS Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
- âŒ ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ Ñ‡ÐµÐ¼ WireGuard

---

## ðŸ”§ Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ macOS

#### ÐžÑˆÐ¸Ð±ÐºÐ° "Operation not permitted"
**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** udp2raw Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ raw sockets
**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ System Integrity Protection
csrutil status

# ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Full Disk Access Ð´Ð»Ñ Terminal:
Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ â†’ Security & Privacy â†’ Privacy â†’ Full Disk Access
ÐÐ°Ð¶Ð°Ñ‚ÑŒ Ð½Ð° Ð·Ð°Ð¼Ð¾Ðº Ð´Ð»Ñ Ð²Ð½ÐµÑÐµÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Terminal
```

#### VPN Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ, Ð½Ð¾ Ð½ÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð°
**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** DNS Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹
**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ DNS
scutil --dns | grep nameserver

# Ð’Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ DNS ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾
sudo networksetup -setdnsservers Wi-Fi 1.1.1.1 8.8.8.8

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸
netstat -nr | grep wg

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ WireGuard
ifconfig wg0
```

#### ÐŸÑ€Ð¾Ñ†ÐµÑÑ udp2raw Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ
**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** Ð‘Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ð¸Ð»Ð¸ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°
**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ
uname -m
# x86_64 = Intel (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ amd64 Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº)
# arm64 = Apple Silicon (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ arm Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº)

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº
file /usr/local/bin/udp2raw
ls -la /usr/local/bin/udp2raw

# ÐŸÐµÑ€ÐµÑÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾
cd /usr/local/bin
sudo rm udp2raw
# Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ Ñ GitHub
```

---

## ðŸ“Š ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°

ÐŸÐ¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ `.conf` Ñ„Ð°Ð¹Ð»Ð°:

```ini
[Interface]
PrivateKey = aL6+fXETtv/i01j7jBQDKtnlNXHBfTy9eE2oAcyxfWM=
# ÐŸÑ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° (Ð”Ð•Ð Ð–Ð˜Ð¢Ð• Ð’ Ð¡Ð•ÐšÐ Ð•Ð¢Ð•!)

Address = 10.7.0.3/24
# Ð’Ð°Ñˆ VPN IP Ð°Ð´Ñ€ÐµÑ (ÑƒÐ½Ð¸ÐºÐ°Ð»ÐµÐ½ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)

MTU = 1280
# ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°ÐµÐ¼Ð¾Ð³Ð¾ Ð±Ð»Ð¾ÐºÐ°
# ÐÐ¸Ð¶Ðµ = Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ, Ð½Ð¾ Ð½Ð°Ð´ÐµÐ¶Ð½ÐµÐµ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÑŽ

DNS = 1.1.1.1, 8.8.8.8
# DNS ÑÐµÑ€Ð²ÐµÑ€Ñ‹ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸

# ÐžÐ±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ udp2raw (ÐšÐ›Ð®Ð§Ð•Ð’ÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯!)
PreUp = sudo /usr/local/bin/udp2raw -c -l 127.0.0.1:4096 -r IP_Ð¡Ð•Ð Ð’Ð•Ð Ð:443 -k SecureVPN2025Obfuscate --raw-mode faketcp --cipher-mode xor --auth-mode hmac_sha1 -a &
# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚ udp2raw Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ fake TCP Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443
# -c = Ñ€ÐµÐ¶Ð¸Ð¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
# -l = Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ Ð¿Ñ€Ð¾ÑÐ»ÑƒÑˆÐ¸Ð²Ð°Ð½Ð¸Ñ (127.0.0.1:4096)
# -r = ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ (IP_Ð’ÐÐ¨Ð•Ð“Ðž_Ð¡Ð•Ð Ð’Ð•Ð Ð:443)
# -k = Ð¿Ð°Ñ€Ð¾Ð»ÑŒ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
# --raw-mode faketcp = Ð¼Ð°ÑÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ð¾Ð´ TCP Ñ‚Ñ€Ð°Ñ„Ð¸Ðº
# --cipher-mode xor = Ð¼ÐµÑ‚Ð¾Ð´ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
# --auth-mode hmac_sha1 = Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ

PostDown = sudo killall udp2raw
# ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ udp2raw Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸

[Peer]
PublicKey = D1m+SC4pa0UDNLXcKb/+cWO1rMXgvEQYl1CZlEFD/1A=
# ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ ÑÐµÑ€Ð²ÐµÑ€Ð°

AllowedIPs = 0.0.0.0/0
# ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð’Ð•Ð¡Ð¬ Ñ‚Ñ€Ð°Ñ„Ð¸Ðº Ñ‡ÐµÑ€ÐµÐ· VPN

Endpoint = 127.0.0.1:4096
# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº Ð›ÐžÐšÐÐ›Ð¬ÐÐžÐœÐ£ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñƒ udp2raw
# udp2raw Ð·Ð°Ñ‚ÐµÐ¼ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚ 443 ÑÐµÑ€Ð²ÐµÑ€Ð°

PersistentKeepalive = 25
# ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ keepalive ÐºÐ°Ð¶Ð´Ñ‹Ðµ 25 ÑÐµÐºÑƒÐ½Ð´
```

---

## ðŸŽ¯ ÐšÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ

### ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹ WireGuard (Ð»ÐµÐ³ÐºÐ¾ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ)
```
Ð’Ð°ÑˆÐµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ â†’ UDP Ð¿Ð°ÐºÐµÑ‚Ñ‹ WireGuard â†’ VPN Ð¡ÐµÑ€Ð²ÐµÑ€
                         â†‘
                DPI Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð²Ð°ÐµÑ‚ Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚
```

### Capybara Ñ udp2raw (Ð¾Ð±Ñ…Ð¾Ð´ DPI)
```
Ð’Ð°ÑˆÐµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ â†’ WireGuard â†’ udp2raw â†’ ÐŸÐ¾Ð´Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ HTTPS/TCP â†’ VPN Ð¡ÐµÑ€Ð²ÐµÑ€
                                                  â†‘
                                  DPI Ð²Ð¸Ð´Ð¸Ñ‚ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ HTTPS Ñ‚Ñ€Ð°Ñ„Ð¸Ðº
```

**ÐŸÐ¾Ñ€Ñ‚ 443 = Ð¿Ð¾Ñ€Ñ‚ HTTPS** - Ð¡ÐµÑ‚Ð¸ Ñ€Ð°Ð·Ñ€ÐµÑˆÐ°ÑŽÑ‚ HTTPS Ñ‚Ñ€Ð°Ñ„Ð¸Ðº
**ÐŸÐ¾Ð´Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ TCP Ð¿Ð°ÐºÐµÑ‚Ñ‹** - Ð’Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÐºÐ°Ðº Ð»ÐµÐ³Ð¸Ñ‚Ð¸Ð¼Ð½Ñ‹Ð¹ Ð²ÐµÐ± Ñ‚Ñ€Ð°Ñ„Ð¸Ðº
**Ð—Ð°ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð°Ñ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°** - Ð”Ð°Ð½Ð½Ñ‹Ðµ WireGuard ÑÐ¿Ñ€ÑÑ‚Ð°Ð½Ñ‹ Ð²Ð½ÑƒÑ‚Ñ€Ð¸

---

## ðŸ” Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

### Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ IP (Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ IP VPN ÑÐµÑ€Ð²ÐµÑ€Ð°)
curl ifconfig.me

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ DNS
nslookup google.com

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ VPN ÑˆÐ»ÑŽÐ·
ping 10.7.0.1

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
netstat -nr | grep wg
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ð¸

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ udp2raw Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
ps aux | grep udp2raw

# Ð”Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð²Ñ€Ð¾Ð´Ðµ:
# udp2raw -c -l 127.0.0.1:4096 -r IP_Ð¡Ð•Ð Ð’Ð•Ð Ð:443 ...

# ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ° (Ñ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹)
sudo tcpdump -i any port 443 -n
# Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð²Ð¸Ð´ÐµÑ‚ÑŒ TCP Ð¿Ð°ÐºÐµÑ‚Ñ‹ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443 (Ð½Ðµ UDP WireGuard)
```

---

## ðŸŒ Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ Ð¿Ð¾ ÑÑ‚Ñ€Ð°Ð½Ð°Ð¼

### ÐšÐ¸Ñ‚Ð°Ð¹ ðŸ‡¨ðŸ‡³
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** WireGuard Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½, Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443 Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ:** Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Capybara Ñ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÐµÐ¹ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443
- **Ð ÐµÐ·ÐµÑ€Ð²:** Ð˜Ð¼ÐµÐ¹Ñ‚Ðµ travel router Ð½Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð°

### Ð Ð¾ÑÑÐ¸Ñ ðŸ‡·ðŸ‡º
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** WireGuard Ð²ÑÐµ Ñ‡Ð°Ñ‰Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ÑÑ, Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ
- **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ:** Ð’ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸ÑŽ
- **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:** Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ travel router Ð´Ð»Ñ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²

### Ð˜Ñ€Ð°Ð½ ðŸ‡®ðŸ‡·
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð°Ñ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ°, Ð¾Ð±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°
- **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ:** ÐžÐ±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 443, Ð±ÑƒÐ´ÑŒÑ‚Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¼ÐµÐ½ÑÑ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€Ñ‹
- **Ð ÐµÐ·ÐµÑ€Ð²:** Ð˜Ð¼ÐµÐ¹Ñ‚Ðµ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñ‹ (Shadowsocks, V2Ray)

### ÐšÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÐµÑ‚Ð¸
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** ÐŸÐ¾Ñ€Ñ‚ 443 Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½ (Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼ Ð´Ð»Ñ Ð²ÐµÐ± Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°)
- **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ:** ÐžÐ±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:** ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸ÐºÑƒ VPN ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´ Ð¾Ð±Ñ…Ð¾Ð´Ð¾Ð¼

---

## ðŸ“ž ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° VPN Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°

Ð’Ð°Ñˆ VPN Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¾Ð¹:

```bash
./capybara.py user list --detailed
./capybara.py connection list
./capybara.py diag handshake alice
./capybara.py diag ping alice
./capybara.py logs show --service udp2raw
```

### ÐžÐ±Ñ‰Ð¸Ðµ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# macOS - ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ WireGuard
sudo wg show

# macOS - ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³ udp2raw
ps aux | grep udp2raw

# macOS - ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
sudo wg-quick down alice
sudo wg-quick up alice

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ ÑÐµÑ€Ð²ÐµÑ€Ð°
./capybara.py logs tail
```

---

## ðŸ†˜ ÐÐ²Ð°Ñ€Ð¸Ð¹Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹

### Ð•ÑÐ»Ð¸ VPN Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð» Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ

1. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²ÐµÑ€Ð°:**
   ```bash
   ./capybara.py server status
   ./capybara.py health check
   ./capybara.py service status
   ```

2. **ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð½Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ðµ:**
   ```bash
   # macOS
   sudo wg-quick down alice
   sudo killall udp2raw
   sudo wg-quick up alice
   ```

3. **ÐŸÐµÑ€ÐµÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:**
   ```bash
   ./capybara.py user remove alice
   ./capybara.py user add alice
   # Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ .conf Ñ„Ð°Ð¹Ð» Ð¸ Ð¿ÐµÑ€ÐµÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ
   ```

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹

### ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
- **WireGuard:** https://www.wireguard.com/
- **udp2raw:** https://github.com/wangyu-/udp2raw

### ÐžÐ±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ
- **GL.iNet Ð Ð¾ÑƒÑ‚ÐµÑ€Ñ‹:** https://www.gl-inet.com/
- **OpenWrt:** https://openwrt.org/

### Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
- **Ð¢ÐµÑÑ‚ ÑƒÑ‚ÐµÑ‡ÐºÐ¸ DNS:** https://www.dnsleaktest.com/
- **Ð¢ÐµÑÑ‚ IPv6:** https://test-ipv6.com/
- **Ð¢ÐµÑÑ‚ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸:** https://speed.cloudflare.com/

---

**ðŸ¦« Capybara VPN - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾Ð±Ñ„ÑƒÑÑ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!**

**Ð’ÐµÑ€ÑÐ¸Ñ:** 2.0.0
**ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ:** 6 Ð½Ð¾ÑÐ±Ñ€Ñ 2025
**ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°:** ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ README.md Ð¸Ð»Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ `./capybara.py --help`
