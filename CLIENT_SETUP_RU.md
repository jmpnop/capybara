# ü¶´ Capybara VPN - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ WireGuard VPN –Ω–∞ macOS –∏ iOS —Å –æ–±—Ñ—É—Å–∫–∞—Ü–∏–µ–π udp2raw.

---

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∫–ª–∏–µ–Ω—Ç–∞ –≤–∞–º –Ω—É–∂–Ω–æ:

1. **–°–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ VPN —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   ./capybara.py user add alice --description "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê–ª–∏—Å—ã"
   ```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª** –∏–∑ `./vpn_clients/`:
   - –ü—Ä–∏–º–µ—Ä: `alice_20251106_123456.conf`
   - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ:**
   - IP —Å–µ—Ä–≤–µ—Ä–∞: `66.42.119.38`
   - –û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç: `443` (TCP, –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ HTTPS)
   - –ü—Ä—è–º–æ–π –ø–æ—Ä—Ç WireGuard: `51820` (UDP, –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö)

---

## üçé –ù–∞—Å—Ç—Ä–æ–π–∫–∞ macOS

macOS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WireGuard, —Ç–∞–∫ –∏ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á–µ—Ä–µ–∑ udp2raw.

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WireGuard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞)

**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞.

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard

–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- **Mac App Store** (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): [WireGuard](https://apps.apple.com/us/app/wireguard/id1451685025)
- **Homebrew**: `brew install --cask wireguard-tools`
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç**: https://www.wireguard.com/install/

#### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ú–µ—Ç–æ–¥ A: –ß–µ—Ä–µ–∑ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è WireGuard**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"+"** –∏–ª–∏ **"Import tunnel(s) from file..."**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à `.conf` —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `alice_20251106_123456.conf`)
4. –ù–∞–∂–º–∏—Ç–µ **"Activate"** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ú–µ—Ç–æ–¥ B: –ß–µ—Ä–µ–∑ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤**
1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à `.conf` —Ñ–∞–π–ª –≤ Finder
2. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª
3. WireGuard –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ù–∞–∂–º–∏—Ç–µ **"Activate"** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ú–µ—Ç–æ–¥ C: –ß–µ—Ä–µ–∑ QR-–∫–æ–¥ (–¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã–µ)**
```bash
# –°–æ–∑–¥–∞—Ç—å QR-–∫–æ–¥ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
brew install qrencode
qrencode -t ansiutf8 < alice_20251106_123456.conf
```

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–π IP –∞–¥—Ä–µ—Å
curl ifconfig.me

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞ (66.42.119.38) –≤–º–µ—Å—Ç–æ –≤–∞—à–µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ IP

# –ü–∏–Ω–≥ VPN —à–ª—é–∑–∞
ping 10.7.0.1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è DNS
nslookup google.com
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π)

**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** –°–µ—Ç–µ–π —Å DPI (Deep Packet Inspection), –ö–∏—Ç–∞–π, –†–æ—Å—Å–∏—è, –ò—Ä–∞–Ω, –∏–ª–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ñ–∞–π—Ä–≤–æ–ª–æ–≤, –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö VPN —Ç—Ä–∞—Ñ–∏–∫.

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–∞—Å–∫–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ WireGuard –ø–æ–¥ –æ–±—ã—á–Ω—ã–π HTTPS —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç—É 443.

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WireGuard
brew install wireguard-tools

# –°–∫–∞—á–∞—Ç—å udp2raw (–ø—Ä–µ–¥—Å–æ–±—Ä–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫)
cd /usr/local/bin
sudo curl -L -o udp2raw https://github.com/wangyu-/udp2raw/releases/download/20230206.0/udp2raw_amd64
sudo chmod +x udp2raw

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
udp2raw --help
```

#### –®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à `.conf` —Ñ–∞–π–ª –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è udp2raw:

**–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```ini
[Interface]
PrivateKey = aL6+fXETtv/i01j7jBQDKtnlNXHBfTy9eE2oAcyxfWM=
Address = 10.7.0.3/24
MTU = 1280
DNS = 1.1.1.1, 8.8.8.8

[Peer]
PublicKey = D1m+SC4pa0UDNLXcKb/+cWO1rMXgvEQYl1CZlEFD/1A=
AllowedIPs = 0.0.0.0/0
Endpoint = 66.42.119.38:51820  # –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
PersistentKeepalive = 25
```

**–ò–∑–º–µ–Ω–µ–Ω–Ω–∞—è –¥–ª—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏:**
```ini
[Interface]
PrivateKey = aL6+fXETtv/i01j7jBQDKtnlNXHBfTy9eE2oAcyxfWM=
Address = 10.7.0.3/24
MTU = 1280
DNS = 1.1.1.1, 8.8.8.8

# –ó–∞–ø—É—Å–∫ udp2raw –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
PreUp = sudo /usr/local/bin/udp2raw -c -l 127.0.0.1:4096 -r 66.42.119.38:443 -k SecureVPN2025Obfuscate --raw-mode faketcp --cipher-mode xor --auth-mode hmac_sha1 -a &
PostDown = sudo killall udp2raw

[Peer]
PublicKey = D1m+SC4pa0UDNLXcKb/+cWO1rMXgvEQYl1CZlEFD/1A=
AllowedIPs = 0.0.0.0/0
Endpoint = 127.0.0.1:4096  # –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π udp2raw
PersistentKeepalive = 25
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `Endpoint` –∏–∑–º–µ–Ω–µ–Ω —Å `66.42.119.38:51820` –Ω–∞ `127.0.0.1:4096` (–ª–æ–∫–∞–ª—å–Ω—ã–π udp2raw)
- –î–æ–±–∞–≤–ª–µ–Ω `PreUp` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ udp2raw –∫–ª–∏–µ–Ω—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω `PostDown` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ udp2raw –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

#### –®–∞–≥ 3: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ Sudo (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

udp2raw —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞ root –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ raw socket:

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª sudoers
sudo visudo

# –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É (–∑–∞–º–µ–Ω–∏—Ç–µ 'yourusername' –Ω–∞ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è macOS):
yourusername ALL=(ALL) NOPASSWD: /usr/local/bin/udp2raw
yourusername ALL=(ALL) NOPASSWD: /usr/bin/killall udp2raw

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏ (Ctrl+X, –∑–∞—Ç–µ–º Y, –∑–∞—Ç–µ–º Enter)
```

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:** udp2raw —Å–æ–∑–¥–∞–µ—Ç raw TCP –ø–∞–∫–µ—Ç—ã –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ UDP —Ç—Ä–∞—Ñ–∏–∫–∞, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ root.

#### –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å VPN —Ç—É–Ω–Ω–µ–ª—å
sudo wg-quick up alice

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo wg show

# –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
sudo wg-quick down alice
```

#### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ udp2raw –∑–∞–ø—É—â–µ–Ω
ps aux | grep udp2raw

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
curl ifconfig.me

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ HTTPS (—Å –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω—ã)
sudo tcpdump -i any port 443 -nn
```

---

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS

iOS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WireGuard –Ω–∞—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç udp2raw** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∂–µ–π–ª–±—Ä–µ–π–∫).

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WireGuard (–±–µ–∑ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö (–ö–∏—Ç–∞–π, –†–æ—Å—Å–∏—è, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π—Ä–≤–æ–ª—ã).

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è WireGuard

–°–∫–∞—á–∞–π—Ç–µ –∏–∑ App Store:
- **App Store**: [WireGuard](https://apps.apple.com/us/app/wireguard/id1441195209)

#### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ú–µ—Ç–æ–¥ A: QR-–∫–æ–¥ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)**

1. –ù–∞ –≤–∞—à–µ–º Mac —Å–æ–∑–¥–∞–π—Ç–µ QR-–∫–æ–¥:
   ```bash
   brew install qrencode
   qrencode -t ansiutf8 < alice_20251106_123456.conf

   # –ò–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   qrencode -t png -o alice_qr.png < alice_20251106_123456.conf
   open alice_qr.png
   ```

2. –ù–∞ –≤–∞—à–µ–º iPhone/iPad:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"+"**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Create from QR code"**
   - –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥
   - –ù–∞–∂–º–∏—Ç–µ **"Save"**

**–ú–µ—Ç–æ–¥ B: AirDrop**

1. –ù–∞ –≤–∞—à–µ–º Mac:
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ `.conf` —Ñ–∞–π–ª
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Share" ‚Üí "AirDrop"**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à iPhone/iPad

2. –ù–∞ –≤–∞—à–µ–º iPhone/iPad:
   - –ü—Ä–∏–º–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É AirDrop
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Open in WireGuard"**
   - –ù–∞–∂–º–∏—Ç–µ **"Save"**

**–ú–µ—Ç–æ–¥ C: iCloud Drive**

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `.conf` —Ñ–∞–π–ª –≤ iCloud Drive
2. –ù–∞ iPhone/iPad –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –§–∞–π–ª—ã
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ `.conf` —Ñ–∞–π–ª—É
4. –ù–∞–∂–º–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ **"Share" ‚Üí "WireGuard"**
5. –ù–∞–∂–º–∏—Ç–µ **"Save"**

#### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ç—É–º–±–ª–µ—Ä —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º –≤–∞—à–µ–≥–æ —Ç—É–Ω–Ω–µ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ **"Allow"** –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è VPN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Face ID/Touch ID

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WireGuard –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   - **Status**: Active
   - **Transfer**: –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ/–ø–æ–ª—É—á–µ–Ω–æ –¥–∞–Ω–Ω—ã—Ö
   - **Latest handshake**: –ù–µ–¥–∞–≤–Ω—è—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Safari:
   ```
   –ü–æ—Å–µ—Ç–∏—Ç–µ: https://ifconfig.me
   –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 66.42.119.38 (IP —Å–µ—Ä–≤–µ—Ä–∞)
   ```

---

### iOS —Å –æ–±—Ñ—É—Å–∫–∞—Ü–∏–µ–π (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å - —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)

–¢–∞–∫ –∫–∞–∫ iOS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç udp2raw –Ω–∞–ø—Ä—è–º—É—é, —É –≤–∞—Å –µ—Å—Ç—å —ç—Ç–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: GL.iNet Travel Router (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å udp2raw:

1. **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:** GL.iNet GL-MT300N-V2 (~$20)
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ OpenWrt –Ω–∞ —Ä–æ—É—Ç–µ—Ä
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã WireGuard –∏ udp2raw
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫ WiFi —Ä–æ—É—Ç–µ—Ä–∞
3. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º (iOS, Android, –Ω–æ—É—Ç–±—É–∫)
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∂–µ–π–ª–±—Ä–µ–π–∫
   - –ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Mac –∫–∞–∫ –ø—Ä–æ–∫—Å–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à Mac –∫–∞–∫ VPN —à–ª—é–∑:

1. **–ù–∞ Mac:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ WireGuard –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—Å–º. macOS –í–∞—Ä–∏–∞–Ω—Ç 2)
2. **–í–∫–ª—é—á–∏—Ç–µ –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É:**
   ```bash
   # –†–∞–∑–¥–∞–π—Ç–µ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WiFi
   –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Sharing ‚Üí Internet Sharing
   Share from: WireGuard (wg0)
   To computers using: Wi-Fi
   ```
3. **–ù–∞ iOS:** –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ä–∞–∑–¥–∞–≤–∞–µ–º–æ–º—É WiFi Mac
4. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ iOS –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π VPN

#### –í–∞—Ä–∏–∞–Ω—Ç 3: Shadowsocks/V2Ray (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–í–º–µ—Å—Ç–æ WireGuard –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ñ—É—Å–∫–∞—Ü–∏—é, –¥—Ä—É–∂–µ–ª—é–±–Ω—É—é –∫ –º–æ–±–∏–ª—å–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Shadowsocks/V2Ray –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Shadowrocket, QuantumultX)
3. –≠—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã macOS

#### –û—à–∏–±–∫–∞ "Operation not permitted"
**–ü—Ä–æ–±–ª–µ–º–∞:** udp2raw –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å raw sockets
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å System Integrity Protection
csrutil status

# –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å Full Disk Access –¥–ª—è Terminal:
–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Security & Privacy ‚Üí Full Disk Access ‚Üí –î–æ–±–∞–≤–∏—Ç—å Terminal
```

#### VPN –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** DNS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
scutil --dns

# –í—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DNS
sudo networksetup -setdnsservers Wi-Fi 1.1.1.1 8.8.8.8

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
netstat -nr | grep wg
```

#### –ü—Ä–æ—Ü–µ—Å—Å udp2raw –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
uname -m
# –ï—Å–ª–∏ arm64 (Apple Silicon), —Å–∫–∞—á–∞–π—Ç–µ arm64 –±–∏–Ω–∞—Ä–Ω–∏–∫
# –ï—Å–ª–∏ x86_64 (Intel), —Å–∫–∞—á–∞–π—Ç–µ amd64 –±–∏–Ω–∞—Ä–Ω–∏–∫

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫
file /usr/local/bin/udp2raw

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
ls -la /usr/local/bin/udp2raw
sudo chmod +x /usr/local/bin/udp2raw
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–º–µ—Ä MTU —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
**–†–µ—à–µ–Ω–∏–µ:**
```ini
# –í –≤–∞—à–µ–º .conf —Ñ–∞–π–ª–µ —É–º–µ–Ω—å—à–∏—Ç–µ MTU
[Interface]
MTU = 1280  # –ü–æ–ø—Ä–æ–±—É–π—Ç–µ 1280, 1200, –∏–ª–∏ 1000
```

### –ü—Ä–æ–±–ª–µ–º—ã iOS

#### –ù–µ —É–¥–∞–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `.conf`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –≤ –≤–∞–ª–∏–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ WireGuard
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –º–µ—Ç–æ–¥ QR-–∫–æ–¥–∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** DNS –∏–ª–∏ AllowedIPs –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç—É–Ω–Ω–µ–ª—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WireGuard
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS —Å–µ—Ä–≤–µ—Ä—ã: `1.1.1.1, 8.8.8.8`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ AllowedIPs: `0.0.0.0/0` (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫)

#### –û—à–∏–±–∫–∞ "Unable to Create Tunnel"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `./capybara.py user remove alice && ./capybara.py user add alice`
- –ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–≤–µ–∂—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

#### VPN –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç—å—é
**–ü—Ä–æ–±–ª–µ–º–∞:** DPI –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç WireGuard
**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ travel router —Å –æ–±—Ñ—É—Å–∫–∞—Ü–∏–µ–π (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 1 –≤—ã—à–µ)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Mac –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 2 –≤—ã—à–µ)
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (Shadowsocks, V2Ray)

---

## üìä –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

–ü–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ `.conf` —Ñ–∞–π–ª–∞:

```ini
[Interface]
PrivateKey = aL6+fXETtv/i01j7jBQDKtnlNXHBfTy9eE2oAcyxfWM=
# –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–µ—Ä–∂–∏—Ç–µ –≤ —Å–µ–∫—Ä–µ—Ç–µ!)

Address = 10.7.0.3/24
# –í–∞—à VPN IP –∞–¥—Ä–µ—Å (—É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

MTU = 1280
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–ª–æ–∫–∞ (—Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞)
# –ù–∏–∂–µ = –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –Ω–∞–¥–µ–∂–Ω–µ–µ
# –í—ã—à–µ = –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

DNS = 1.1.1.1, 8.8.8.8
# DNS —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
# 1.1.1.1 = Cloudflare (–±—ã—Å—Ç—Ä—ã–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)
# 8.8.8.8 = Google (–Ω–∞–¥–µ–∂–Ω—ã–π)

[Peer]
PublicKey = D1m+SC4pa0UDNLXcKb/+cWO1rMXgvEQYl1CZlEFD/1A=
# –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–µ—Ä)

AllowedIPs = 0.0.0.0/0
# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ VPN
# –î–ª—è split tunnel: 10.7.0.0/24 (—Ç–æ–ª—å–∫–æ VPN —Ç—Ä–∞—Ñ–∏–∫)

Endpoint = 66.42.119.38:443
# –ê–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
# :443 = –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–∫–∞–∫ HTTPS)
# :51820 = –ø—Ä—è–º–æ–π WireGuard

PersistentKeepalive = 25
# –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å keepalive –ø–∞–∫–µ—Ç –∫–∞–∂–¥—ã–µ 25 —Å–µ–∫—É–Ω–¥
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ NAT
```

---

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º** - –û–Ω –≤ —Å–µ–∫—Ü–∏–∏ `[Interface]`
2. **–ó–∞—â–∏—â–∞–π—Ç–µ –≤–∞—à .conf —Ñ–∞–π–ª** - –°–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - –ó–∞—â–∏—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é VPN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. **–í–∫–ª—é—á–∞–π—Ç–µ –∞–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫—É** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ VPN

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Å–µ—Ä–≤–µ—Ä** - –ú–µ–Ω—å—à–µ –∑–∞–¥–µ—Ä–∂–∫–∞
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã MTU** - –ù–∞–π–¥–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DNS over HTTPS** - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
4. **–û—Ç–∫–ª—é—á–∞–π—Ç–µ –Ω–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö** - –≠–∫–æ–Ω–æ–º–∏—Ç –±–∞—Ç–∞—Ä–µ—é –∏ —Ç—Ä–∞—Ñ–∏–∫

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º WiFi** - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
2. **–í–∫–ª—é—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é (iOS)** - –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ DNS** - 1.1.1.1 –∏–ª–∏ 9.9.9.9
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ —É—Ç–µ—á–∫–∏ IPv6** - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN IPv6 –∞–¥—Ä–µ—Å–∞

---

## üì± –ü—Ä–∞–≤–∏–ª–∞ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é (—Ç–æ–ª—å–∫–æ iOS)

–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VPN –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à —Ç—É–Ω–Ω–µ–ª—å
3. –ù–∞–∂–º–∏—Ç–µ **"On-Demand Activation"**
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:

**–ü—Ä–∏–º–µ—Ä: –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º WiFi**
```
Cellular networks: Off
Wi-Fi: Off
Ethernet: Off
SSIDs to activate on:
  ‚òê Home-WiFi (–¥–æ–≤–µ—Ä–µ–Ω–Ω–∞—è)
  ‚òê Office-WiFi (–¥–æ–≤–µ—Ä–µ–Ω–Ω–∞—è)
  ‚òë Any other WiFi (–Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–∞—è)
```

**–ü—Ä–∏–º–µ—Ä: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–π VPN**
```
Cellular networks: On
Wi-Fi: On
Ethernet: On
```

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à –≤–Ω–µ—à–Ω–∏–π IP
curl ifconfig.me
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å: 66.42.119.38

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ DNS
nslookup google.com
# –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN DNS —Å–µ—Ä–≤–µ—Ä—ã

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VPN —à–ª—é–∑
ping 10.7.0.1
# –î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
# macOS:
netstat -nr | grep wg
# iOS: –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ç–µ—á–∫–∏ DNS
curl https://www.dnsleaktest.com/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ç–µ—á–∫–∏ IPv6
curl https://test-ipv6.com/

# –¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
curl -o /dev/null https://speed.cloudflare.com/__down?bytes=100000000

# –¢–µ—Å—Ç –∑–∞–¥–µ—Ä–∂–∫–∏
ping -c 10 10.7.0.1
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ (macOS)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ udp2raw –∑–∞–ø—É—â–µ–Ω
ps aux | grep udp2raw

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è root)
sudo tcpdump -i any port 443 -nn -v
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å TCP –ø–∞–∫–µ—Ç—ã (–Ω–µ UDP)
```

---

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ VPN —Å —Å–µ—Ä–≤–µ—Ä–∞

–í–∞—à VPN –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```bash
./capybara.py user list --detailed
./capybara.py connection list
./capybara.py diag handshake alice
./capybara.py diag ping alice
```

### –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

```bash
# macOS - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å WireGuard
sudo wg show

# macOS - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å WireGuard
sudo wg-quick down alice
sudo wg-quick up alice

# iOS - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WireGuard
Settings ‚Üí Export log file ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
```

---

## üåç –ó–∞–º–µ—Ç–∫–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º

### –ö–∏—Ç–∞–π
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WireGuard:** –û–±—ã—á–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- **–û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (udp2raw):** –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 443
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ macOS –í–∞—Ä–∏–∞–Ω—Ç 2 –∏–ª–∏ travel router

### –†–æ—Å—Å–∏—è
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WireGuard:** –ß–∞—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- **–û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (udp2raw):** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** Shadowsocks –∏–ª–∏ V2Ray

### –ò—Ä–∞–Ω
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WireGuard:** –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- **–û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (udp2raw):** –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

### –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WireGuard:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- **–û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø–æ—Ä—Ç—É 443:** –û–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ HTTPS)
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–º–ø–∞–Ω–∏–∏ –ø–µ—Ä–µ–¥ –æ–±—Ö–æ–¥–æ–º

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **WireGuard:** https://www.wireguard.com/
- **udp2raw:** https://github.com/wangyu-/udp2raw

### macOS WireGuard
- **App Store:** https://apps.apple.com/us/app/wireguard/id1451685025
- **Homebrew:** https://formulae.brew.sh/cask/wireguard-tools

### iOS WireGuard
- **App Store:** https://apps.apple.com/us/app/wireguard/id1441195209
- **TestFlight:** –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è VPN
- **–¢–µ—Å—Ç —É—Ç–µ—á–∫–∏ DNS:** https://www.dnsleaktest.com/
- **–¢–µ—Å—Ç IPv6:** https://test-ipv6.com/
- **–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏:** https://speed.cloudflare.com/

---

## üÜò –ê–≤–∞—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

### –ï—Å–ª–∏ VPN –ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   ./capybara.py server status
   ./capybara.py health check
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VPN –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:**
   - macOS: `sudo wg-quick down alice && sudo wg-quick up alice`
   - iOS: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –≤—ã–∫–ª/–≤–∫–ª –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

3. **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   ./capybara.py user remove alice
   ./capybara.py user add alice
   # –ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π .conf —Ñ–∞–π–ª –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   ```

### –ï—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ –≤—ã:**
   ```bash
   ./capybara.py user list
   # –ò—â–∏—Ç–µ —Å—Ç–∞—Ç—É—Å 'blocked'
   ```

2. **–°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**
   ```bash
   ./capybara.py user unblock alice
   ```

---

**ü¶´ Capybara VPN - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

**–í–µ—Ä—Å–∏—è:** 2.0.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 6 –Ω–æ—è–±—Ä—è 2025
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π README.md –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `./capybara.py --help`
